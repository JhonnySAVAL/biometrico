$("#editModal").on("show.bs.modal",function(e){var o=$(e.relatedTarget),t=o.data("id"),i=o.data("nombre"),r=o.data("area"),a=o.data("descripcion"),n=$(this);n.find("#edit-id").val(t),n.find("#edit-nombrePuesto").val(i),n.find("#edit-area").val(r),n.find("#edit-descripcion").val(a)}),$("#deleteModal").on("show.bs.modal",function(e){var o=$(e.relatedTarget),t=o.data("id"),i=o.data("nombre"),r=$(this);r.find(".modal-title").text("Eliminar puesto: "+i),r.data("idPuestoEliminar",t),$.ajax({url:"/biometrico/sistema/controller/ConfiguracionesController/PuestosController.php?action=VerificarUsuariosPorPuesto",method:"GET",data:{idPuesto:t},success:function(e){var o="";e.empleados&&e.empleados.length>0?(o="<p>Este puesto tiene los siguientes empleados vinculados:</p><ul>",e.empleados.forEach(function(e){o+="<li>DNI: "+e.dni+" - "+e.nombre+"</li>"}),o+="</ul>",$("#btn-delete").prop("disabled",!0)):(o="<p>No hay empleados vinculados a este puesto.</p>",$("#btn-delete").prop("disabled",!1)),r.find("#user-list").html(o)},error:function(){Swal.fire({title:"Error",text:"Hubo un problema con la conexión al servidor.",icon:"error"})}})}),$("#btn-delete").off("click").on("click",function(){var e=$("#deleteModal").data("idPuestoEliminar");void 0!==e&&!1===$("#btn-delete").prop("disabled")?$.ajax({url:"/biometrico/sistema/controller/ConfiguracionesController/PuestosController.php?action=EliminarPuesto",method:"POST",data:{idPuesto:e},success:function(e){e.success?Swal.fire({title:"Éxito",text:"El puesto ha sido eliminado correctamente.",icon:"success"}).then(()=>{location.reload()}):Swal.fire({title:"Error",text:"Este puesto tiene empleados vinculados. No se puede eliminar.",icon:"error"})},error:function(){Swal.fire({title:"Error",text:"Hubo un problema con la conexión al servidor.",icon:"error"})}}):alert("Primero debe mover los empleados vinculados a este puesto.")}),document.getElementById("formCrearPuesto").addEventListener("submit",function(e){e.preventDefault(),Swal.fire({title:"¿Estás seguro?",text:"¿Quieres crear este nuevo puesto?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Sí, crear!"}).then(e=>{e.isConfirmed&&(this.submit(),setTimeout(function(){location.reload()},1e3))})});